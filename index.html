<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ectivse GPON Cloud</title>
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <style>
        .inputcell {
            width: 200px;
            height: 15px;
            background: #f5f5f5;
            border: 1px solid rgb(221, 221, 221);
            padding: 5px;
            color: blue
            /* color: rgb(187, 184, 194); */
        }

        .inputcell[placeholder]:empty:before {
            content: attr(placeholder);
            color: rgb(194, 184, 184);
        }
    </style>
</head>

<script src="/socket.io/socket.io.js"></script>
<script>
    // document.getElementById('custnm').innerHTML = 'StarHub';
    var socket = io();

    function fun_gponcal() {
        var unitPrice4p = parseFloat('787.00');
        var unitPrice8p = parseFloat('1634.00');
        var oltPrice8p = parseFloat('201566.80');
        var oltPrice16p = parseFloat('671732.00');
        var oltPrice16p_1 = parseFloat('880072.00');
        // debugger;
        // var r = $("#tbl_custinfo #tr_endpoint #td_endpoint").text();
        // var r1 = $("#custnm").text();
        // var r2 = $("#engage").text();
        var endpoints1 = $("#_endpoints").text().trim();
        if (endpoints1 == '') {
            // debugger;
            alert('Please input the number of endpoints');
            return false;
        }
        var endpoints = endpoints1 == '' ? 0 : parseInt(endpoints1, 10);
        var ont4port = endpoints / 4;
        var ont8port = endpoints / 8;
        document.getElementById("nosont4").innerHTML = ont4port;
        document.getElementById("nosont8").innerHTML = ont8port;
        var ea5801G084psub = ont4port * unitPrice4p;
        var ea5801G088psub = ont8port * unitPrice8p;
        document.getElementById("ea5801G084psub").innerHTML = ea5801G084psub;
        document.getElementById("ea5801G088psub").innerHTML = ea5801G088psub;

        document.getElementById("ea5801G084pkg").innerHTML = ea5801G084psub + oltPrice8p;
        document.getElementById("ea5801G088pkg").innerHTML = ea5801G088psub + oltPrice16p;


        // var ea5800x,ea5800x1;
        document.getElementById("ea5800x2_4pkg").innerHTML = ea5801G084psub + oltPrice16p;
        document.getElementById("ea5800x2_8pkg").innerHTML = ea5801G088psub + oltPrice16p;

        var ea5800x, ea5800x1;
        document.getElementById("ea5800x7_4pkg").innerHTML = unitPrice4p * ont4port + oltPrice16p_1;
        document.getElementById("ea5800x7_8pkg").innerHTML = unitPrice8p * ont8port + oltPrice16p_1;

        debugger;
        //console.log(document.getElementById('endpoints').value);
        // socket.emit('gponcal', document.getElementById('endpoints').value);
    }

    function setUsername() {
        socket.emit("setUsername", document.getElementById("name").value);
    }

    var user;
    socket.on("userExists", function (data) {
        document.getElementById("error-container").innerHTML = data;
    });
    socket.on("userSet", function (data) {
        user = data.username;
        document.body.innerHTML =
            '<input type = "text" id = "message">\
             <button type = "button" name = "button" onclick = "sendMessage()">Send</button>\
             <div id = "message-container"></div>';
        // document.getElementById('custnm').innerHTML = 'StarHub';
    });

    function sendMessage() {
        var msg = document.getElementById("message").value;
        if (msg) {
            socket.emit("msg", {message: msg, user: user});
        }
    }

    socket.on("newmsg", function (data) {
        if (user) {
            document.getElementById("message-container").innerHTML +=
                "<div><b>" + data.user + "</b>: " + data.message + "</div>";
        }
    });
</script>

<body>
<script>
    $(document).ready(function () {
        console.log("ready!");
        //  $('#tbl_custinfo > tbody > tr:last').after(newRow);
    });
</script>
<div id="error-container"></div>
<b> <u></u> Customer Info </b>
<hr/>
<table cellspacing="0" border="1" id="tbl_custinfo">
    <tr>
        <td style="min-width:50px">Huawei GPON Solution Package</td>
        <td style="min-width:50px">
            <button type="button" name="button" onclick="fun_gponcal()">
                Let me Calculate Price
            </button>
        </td>
    </tr>
    <tr>
        <td style="min-width:50px">Name of customer</td>
        <td style="min-width:50px">
            <!-- <div
              contenteditable="true"
              id="custnm"
              style="border:solid 1px rgb(56, 0, 102)"
            >
              customer name
            </div> -->
            <div class="inputcell" id="custnm" placeholder="Name of customer" contenteditable="true"></div>
        </td>
    </tr>
    <tr>
        <td style="min-width:50px">Date of engagement</td>
        <td style="min-width:50px">
            <!-- <div contenteditable="true" id="engage" style="border:solid 1px #060">
              date of engagement
            </div> -->
            <div class="inputcell" id="engage" placeholder="date of engagement" contenteditable="true"></div>
        </td>
    </tr>
    <tr>
        <td style="min-width:50px">Industry sector</td>
        <td style="min-width:50px">
            <!-- <div
              contenteditable="true"
              id="Industry"
              style="border:solid 1px #060"
            ></div> -->
            <div class="inputcell" id="Industry" placeholder="Industry sector" contenteditable="true"></div>
        </td>
    </tr>
    <tr>
        <td style="min-width:50px">Estimate nos of end hoster</td>
        <td style="min-width:50px">
            <!-- <div class="inputcell"
              contenteditable="true"
              id="_endpoints"
              style="border:solid 1px rgb(56, 0, 102)" placeholder="ngagement"
            >

            </div> -->
            <div class="inputcell" id="_endpoints" placeholder="nos of endpoints" contenteditable="true">
            </div>
        </td>
        <!-- <td style=min-width:50px>
              <button type="button" name="button" onclick="fun_gponcal()">
                    Calculate
                 </button>
        </td> -->

    </tr>
    <tr>
        <td style="min-width:50px">Type of redundancy</td>
        <td style="min-width:50px" id="typeofredt">Dual-Homing xPON Type B</td>
    </tr>
    <!-- <tr id="tr_endpoint">
      <td style="min-width:50px">Estimate nos of end host</td>
      <td style="min-width:50px">
        <div
          contenteditable="true"
          id="td_endpoints"
          style="border:solid 1px #060"
        >
          0
        </div>
      </td>
      <td style=min-width:50px>
             <button type="button" name="button" onclick="fun_gponcal()">
                   Calculate
                </button>
       </td>
    </tr> -->
    <tr>
        <td style="min-width:50px">Number of 4 Port ONT</td>
        <td style="min-width:50px" id="nosont4">0</td>
    </tr>
    <tr>
        <td style="min-width:50px">Number of 8 Port ONT</td>
        <td style="min-width:50px" id="nosont8">0</td>
    </tr>
    <tr>
        <td style="min-width:50px">
            SmartAX EA5801-GP08 Dual Homing 8 PON Ports OLT Unit Price
        </td>
        <td style="min-width:50px" id="ea5801gp088uprice">00</td>
    </tr>
    <tr>
        <td style="min-width:50px">
            SmartAX EA5800-X2 Dual Homing 16 PON Ports OLT Unit Price
        </td>
        <td style="min-width:50px" id="ea5800x2unprice">00</td>
    </tr>
    <tr>
        <td style="min-width:50px">
            SmartAX EA5800-X7 Dual Homing 16 PON Ports OLT Unit Price
        </td>
        <td style="min-width:50px" id="ea5800x7uprice">00</td>
    </tr>
    <tr>
        <td style="min-width:50px">EA5801-G08 4 Port ONT Sub Total</td>
        <td style="min-width:50px" id="ea5801G084psub">0</td>
    </tr>
    <tr>
        <td style="min-width:50px">EA5801-G08 8 Port ONT Sub Total</td>
        <td style="min-width:50px" id="ea5801G088psub">0</td>
    </tr>
    <tr>
        <td style="min-width:50px">EA5801-GP08 4 Ports ONT Package Price</td>
        <td style="min-width:50px" id="ea5801G084pkg">0
        </td>
    </tr>
    <tr>
        <td style="min-width:50px">EA5801-GP08 8 Ports ONT Package Price</td>
        <td style="min-width:50px" id="ea5801G088pkg">0</td>
    </tr>
    <tr>
        <td style="min-width:50px">
            SmartAX EA5800-X2 4 Ports ONT Package Price
        </td>
        <td style="min-width:50px" id="ea5800x2_4pkg">0</td>
    </tr>
    <tr>
        <td style="min-width:50px">
            SmartAX EA5800-X2 8 Ports ONT Package Price
        </td>
        <td style="min-width:50px" id="ea5800x2_8pkg">#REF!</td>
    </tr>
    <tr>
        <td style="min-width:50px">
            SmartAX EA5800-X7 4 Ports ONT Package Price
        </td>
        <td style="min-width:50px" id="ea5800x7_4pkg">0</td>
    </tr>
    <tr>
        <td style="min-width:50px">
            SmartAX EA5800-X7 8 Ports ONT Package Price
        </td>
        <td style="min-width:50px" id="ea5800x7_8pkg">0</td>
    </tr>
    <tr>
        <td style="min-width:50px">Total</td>
        <td style="min-width:50px" id="total">15.375</td>
    </tr>
</table>

<input
        id="name"
        type="text"
        name="name"
        value=""
        placeholder="Enter your name!"
        hidden
/>
<button type="button" name="button" onclick="fun_gponcal()" hidden>
    Let me chat!
</button>
</body>
<script>
    // var oltPrice8p = parseFloat('201566.80');
    // var oltPrice16p = parseFloat('671732.00');
    // var oltPrice16p_1 = parseFloat('880072.00');
    var oltPrice8p = '201566.80';
    var oltPrice16p = '671732.00';
    var oltPrice16p_1 = '880072.00';
    document.getElementById("ea5801gp088uprice").innerHTML = oltPrice8p;
    document.getElementById("ea5800x2unprice").innerHTML = oltPrice16p;
    document.getElementById("ea5800x7uprice").innerHTML = oltPrice16p_1;
</script>
</html>
